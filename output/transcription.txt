就是上次 讲完了二级方案部署方案之后呢,应咱们大华的 同事呢,然后马克 Peter他们就提出了一个三级的这么一个东西,那这个的话也合理,我们这边出了一个三级的部署方案。 这个是结合我们现有的一些,现有的开发技术以及我们认为是最佳优的一种部署方案。 然后与埃及的部署方案有一些不同,略有不同,然后整体这样介绍一下,然后大致的目录其实差不多,里面有上次要求的,比如说那个数据的格式,每一个OS的这个实时的,这个格式,这次有一个讲。 然后的话还有一块的就是 爱爱层架构和三层架构的一个比较。 然后这是一块的,就多了这么两项东西,那整个的这个方案的话,从网络的结构来说的话, 上次这个AWS HQ Cloud这个store Cloud还是继续保留的。 因为这个我们 这个网络的事情先不说,然后阿里的Cloud是这样的,然后我们阿里的整个的这个pose的话部署是阿里HQ server,然后这个OSS依然不变,然后的话在这个阿里store server呢,就是代表的就是门店的那个服务器,门店的服务器上呢会部署这个服务,然后有一个,然后的话平板的postmate和Uber和呢都是连这个HQ server,就是这个上面这是个网络,然后的话pose和电子秤,这个箭头呢是他自己,啊 本身的自己的运算,就是说他本身就带data,就像电子秤的它数据就下巴了给他自己,他自己去运行,然后pose的话就带database,就是上次说的就light。 然后这个上面有一个这个销售订单,然后pose的销售订单还有一个新 会传给这个server,然后还有一块的话就是门店的这个store server呢,就是同步商品价格出销员工权限的这个数据的,这么一个整个的一个网络部署图。 这块看有没有什么问题。 你好,我是。 早早早,嗯,早。 你这个,你这个是三级的部署图吗? 对对对,这个server,然后还有一个store server,嗯。 嗯,你这个三级的部署跟我们expect的三级的部署不太一样,但是你这个其实跟你们的二级差不多吧,你只是多了一个这个部分而已吧。 有一块同步,这个不太一样的话就是这。 就是说原来的话就是一级的 server,server的话就是所有的都放在鸡蛋放在这一个篮子里面,就数据同步的问题,放在这里 你的話出了問題,那這邊呢就沒有數據了,那現在的話就是它的數據是一個分層的,然後由HQ server傳到 store server上, store server再給傳給 pause,那這一條路是鏈路是這樣的,所以說 pause上的數據呢下載呢是從 store server上去下載,然後 store server呢是從那個OSS,然後CDN去下載。 嗯。 OK,那你切這麼多塊的話,你對那個IP這部分的需求會不會提高呢? 那跟咱們現在是一樣的,就是咱們現在的三層的這個網絡架構是一模一樣的,它沒有多大的,然後反而是 差不多。 好,OK。 就唯一一個區別不一樣的,就是我我還是要指明,就是原來的這一塊的話,咱們的 store server,就是咱們的現在的 pause的 store server的是提供了電務的能力,也就是說backend呢是連的是它。 對吧? 嗯哼。 是連的是他,唯一就是這一個區別,然後還有一個區別就是訂單,post的訂單是傳給他,然後由store server的傳給HQ server的,然後postmat和Uber呢,其實還是連的原來的HQ server, 它是沒有連這個的。 這個是咱們現在的嘛。 那唯一不不不同的就是backend,我們建議還是連著上面的,然後的話就是 訂單的話是由post直接給他傳HQ server,然後這個的話,因為從這傳,從咱們現在的這個機制是store server傳給H server,還是post傳給HQ server,其實是一樣的,只是原來的話,backend在這個上面操作,提供了這個電務的能力,那我們把這個電務的能力放在上面去了,backend放在上面去了。 那這一塊的話,從網絡的整體方向來說的話,我們現在唯一擔心的是這個的 HQ server會不會出問題,一旦出了問題,怎麼辦?因為咱們這邊 现在我门店的网络也是一个双线的,就是主从网络的,上次咱们聊过的,就是门店的网络有一个主网络,还是有一个从网络。 那主网络出现问题了,从网络会启用,然后除非整个门店断电了,那网络才会断掉,所以说这个网络的这一块的,就是它的 可用性是非常高的,可用度是可用性非常高,所以说直接连着SQL server是没有问题,我们现在唯一解决的就是我们 阿里的POS唯一解决的一个方案是,就是 给他们大华要,嗯 或者说要解决的一个问题,就是让大家相信这个SQL server是没有问题的。 无论是高可用还是怎么样,就是说保证他,比如说现在所谓的那个服务器中服务器平台的角度有个SLA,就是说那个可接受度,就是 就是说比如说四个九啊,还是五个九啊,或者九个九啊,就不同的 不一样的,就是接受 這個發生的概率,比如說是千分之一0.多少,就這種四個百分之多少,保證幾個九的這種就保障的這個可用性的話,它的方案是不一樣的,這是有平台機制來決定的。所以說這一塊,但從本身上來說的話,跟現在的方案,現在的話server也是會出現問題,就是說可能沒有出現問題,但是它還是有概率會出現問題,server也會有概率的,但是怎麼保障呢?比如說四個九,九99.9999,然後四個九,然後或者說99.九個九,那如何保障這個呢?這個是這個是一個平台的解決方案,這個平台解決方案就跟部署就不太相關了,就是我唯一我要解決的就是這個怎麼給你們講這個事情,那這個的話需要我們這邊的專業的人也要給你們講。 就是解決這個,類似於現在B2B的,所以說我認為 backend連他 和現在咱們連這個是一樣的,唯一我解決了 一个问题就是我在下面比较的时候,三级比较的时候,为什么这样做,这个比三比二级有一个什么样的优势,或者说二级有比他有什么样的,那最终讲完三节之后咱们再来决测。 你看怎么样,Peter,我这个说的应该是清楚了啊。 可以。 对,永,两个问题,第一个问题就是说,那你我们因为我没有看到你的部署图上面有我们的就是pose连的地方,所以pose应该是连在哪? Pose啊,pose连在pose在这,下面介绍这个场景的时候你 哦,那那好,那第二个问题就是说,那你这个划分会不会影响到这个realtime的 inventory? 嗯 这是我们的 嗯,你讲。 就是 就是包含那个realtime的 inventory,还有我们的那个 reward program, Royal program那些东西。 不会,不会,不会。 都不会影响到。 对对,不会影响到。 OK,好。 嗯。 好,没没关系,这个东西我们会那 一部我跟会跟他们会一起讨论一下这个东西。 OK，那我们过一下这个，然后在这块的话，就是网络的这个场景支持的话。 嗯，你讲。 是长。 对，你上面那一块啊，因为你说那个HQ怎么要保证那个阿里HQ server没问题嘛，对不对？ 对，对。 对，嗯 我们是一直想说如果你这个阿里HQ可以放到AWS的那个HQ cloud放一个。 那当然这个东西可能 out of scope。 但是 我们是很想要这么做的，那那你们可以研究一下吧。 还是说可以让我们知道说如果我们这样子的话，是你们技术上可以支持到什么程度，然后我们我们这边应该怎么做。 嗯，这个岔开一个话题，我我了解到SOW里面有一个就是说有一个分，就是提供了要求一个就是我们如果出现那种政策性的因素，然后从这个HQ server可以转移到这个AWS，还是我们这个平台 现在阿里我们这个平台的技术也是支持AWS的。 对,其实不是,不是考虑到政策的因素,那是,那当然也是一个考虑,但是不是完全绝对的,我是觉得分散那个这个server在不同的cloud上面是比较好的。 了解您说的这个东西。 但这个的话就跟,这是另外的一个 问题。 就您说的这个,就跟咱们三级的这个部署的话,就不受影响,就是无论是SQL server放到HQ cloud还是阿里cloud,就是post的三级部署是这样的。 对,没错,但是这是一个 backup plan嘛,因为,因为我们要很担心的就是全部都挂在一个 server上面,那它有问题的时候,我们要想办法怎么做,这也是你们想要做的嘛。 对对对对对。 我明白您说的这个东西。 我我也想就是讨论一下,就是 就我觉得讨论就是放一个OSS,阿里云上面的OSS 在那个AWS上面我觉得可能性不大啊。 然后那个不如在AWS,就是在在阿里云上面去同时有两个OSS的这样的一个backup的一个plan,这个是,这个是没有问题的,并且本身这个阿里云的这个可用性,它也是具体几个九啊,就是就是我觉得如果有两个OSS,基本上就能够解决我们这个这个唯一性的这个问题。 那如果说像苏珊说的就是说直接直接有在AWS上的阿里的OSS在上面部署,我先技术上可行,但但但其实应该不会很少有人这么去去运作。 可能先办吧。 先讨论啊,先讨论啊。 这个先放放一个土豆吧。 真的。 到时候我们先还是到时候跟大华再解决,就大华 咱们这个大华的同事有这个方面的这个他好的建议嘛,首先这是一个就是解决这个,那我们如何保障这个我们HQ server这个几个9的这个可用性的这个问题,我们到时候这个方案的时候肯定要给他们讲讲的。然后他们只要接受这个这个东西的可用性只要OK了,其实这个方案,我更偏向于是二级的方案,那整个的话今天过完了之后再看,就是这个的话还是要评估。
这个三级方案,嗯,你讲。不好意思,那个请教您两个问题,一个就是在你这张图上面,这个store server的主要功用是什么?第二个呢,跟跟二级方案有什么不同,那第二个呢,就是如果是offline的状况,也就是他说他接不,接不回去到阿里的HQ的server的时候,那二级跟三级,那你这个store server的功用又是什么? 嗯,这个下面我整体讲完了之后,您就会清楚这个了。 因为下面场景都会介绍到。 好了,那我就继续一下啊。 这个这个网络场景是这样的,三级的网络场景,首先pose的销售分为在线和离线两种销售模式。 然后网络状态呢,因为有了这个这个网络,因为我们门店的网络是一个局域网,然后呢跟HQ server呢,这是属于公网,就是说internet这个的,那我们的网络状态呢,我把它定义为就是在线和在网,在网的话就是在门店网络,他访问不到HQ server了,这叫在网模式,然后离线的话就是说这个pose呢跟门店的网络整个断掉了,然后他只能访问他自己,那这个的话就是三个网络状态。 那这样的话,这个销售模式呢,是我们的平台呢会提供一个参数配置,灵活的去选择。 当然我们有一个默认的模式,默认的参数,然后销售模式呢,就是在线的销售呢是指什么呢?就是pose全程使用这个HQ server的销售能力，就是使用它的服务能力，全程使用。 如果配置了这个在线，然后如果配置了离线，全程使用的就是local，就是它跟咱们现在的lock还有RTS一模一样的，然后就是全程使用它的local的这个销售能力。 然后网络状态呢就是这样的，就在线的话就是我刚才介绍的，就是它能够访问SQL，就是互联网网络OK的。在网的话就是能够访问store server，就是门店的网络，内网是同行OK的。离线的话就是门店的网络整个故障了。 或者说store server也出现故障了，post机整个无法访问它，这个就是离线的，这个三种。 那我们在线的这个请求的话，就是在线的模式销售，您可以看一下我有一个简单的场景，就是我整个收银员通过扫码的时候呢，扫码添加一个商品，我的post机呢全部请求的是HQ server的这个服务，然后去查询，就计算价格，然后返回，然后提交订单，然后支付，包括，但是有一个特点，您会看到我所有的post机呢会本地保存一份完整的订单 信息。 这是第一个，然后我的订单保存成功了，其实我就要打印小票了嘛，这是这是pause的另外一件事情，然后我的这个订单呢会 传给HQ server，这是一个，然后我继续下一单，这是一个异步的操作，那这是一个，那我们的离线呢，离线的销售模式呢就是无论是在网还是离线，我全部使用这种离线的模式。 那这个的话就是我pause机全部你使用本机的这个东西了。 本机的服务就OK了，然后全部 进行结算，就是销售。 那这样的话就是提供了这两种能力呢，那我们就有一些数据同步了，我们的数据同步上次埃及的方案的时候讲了，我们说OSS的一个文件是一个什么样的，我们的OSS有一个类型就是全量的，还有一个的话就是增量。那全量的话上次就埃及的是就讲到了，就我下面也会讲到，就是 我 新装 一台机器的时候，pause机的时候，这时候就是全量，后面的话  让这个文件变得更小,我们都会压缩这个,然后promotion呢是一个出销,啊,然后是商品加价格,然后加上这个出销活动,这是通过OSS,还有一个我们的是一个实时的这个数据,实时的数据我上次讲过了,就是是API,然后https,http,然后是一个json的格式,这个是一个,呃,我我们的一个demo,那这上面的一些表呢,可能在我们的项目上到时候会发生一些变化,因为这个是我们标定在其他项目上的一些 表,然后这样的话就是比如说删除啊,insert,就全部都是一些script,呃,circle这些脚本,然后通过json就传下来,这个就可以实时更新。 然后还有一块呢,就是我们的销售订单,我们的销售订单是一个API的,就跟原来不一样了,就是原来是通过那个文件去传的,我们是通过API,API就传上去,然后这个的话就是order的一个整个的订单就是这样的一个json的一个格式,这是sale order。   这种数据是比较少了。 然后这种数据的话就是server上去查。 查完了之后就更新。 那是我们的server上其实是有一套database的，就是有有它的服务，有它的database。 然后这样的话就是这些东西一样了，就是只是不一样的地方就是post app，原来是从SQL server去查的，现在不了，你新装一个 呃，比如说post app，你新装的时候，装一个的是，装这个app的时候呢，其实post 激活的时候呢，是通过Nginx，我上面那个图画的有一个Nginx，就是server上有Nginx，然后呢 它是http，从这个server去下载文件。 啊这个就是内网，速度就特别快了，跟之前的那个CDN，肯定比CDN还要快，内网的。然后这样的话就是先请求这个服务器，激活嘛，它要安装的时候要激活，请求服务器是SQL server，然后激活码拿到了，返回数据版本，然后直接就到这个server上去下，然后下载完了这个数据流，然后就安装软件就OK了。 了,这是安装,那还有一个就是启动,启动的时候呢是pause,直接演示从server上去,下载这个http,通过这个下载这个文件。 然后这样的话就是请求服务器查询增量的这个东西,那这个时候呢,因为安装的时候就要请求那个SQ server,那是要请求版本的,但是这个时候呢就不用请求了,因为他本地的时候,他本地有一个自己的版本,他会把这个版本号发上去,发到这个store server去问,我有没有 更新的吗,最新的版本,如果有最新的版本,然后就下载发给他,然后继续下载,那这个时候就没有SQ server的任何事情了,然后销售过程中也是一样的,去就是http,那这是内网,全是内网的,所以他不,我们就没有,就不用使用https了,就全部是http这种请求。 然后下面这个的话就是定时轮询嘛,这个实施的演示一样的定时轮询,就是跟二级的 就是步骤是没有发生变化的,请求端发生了变化,就是store server,原来都是HQ server。 手动,这是自动的,然后还有一个就是手动更新,就是销售的时候, 比如说 店长改动了一个东西之后就是通知了,改动了一个东西要立马更新了,或者总部更新了一个东西,立马去改掉一个数据,然后就通知,通知完了之后呢,然后所有的post成员呢接到这个 请求呢,他就可以手动去更新,立马就更新这个价格就跟就跟那个纸质价签上是一样的。 那么post的这个销售订单的数据上传是这样的。 我们在,我们刚才不是说了嘛,有一个在线,有一个online,还有一个离线嘛,这个的话不是根据我们的网络状态,不是根据我们的配置去判断的,这个是完全是根据网络状态去判断的。就如果我们选择了在线的模式,就是保存完订单之后,他会直接去请求这个东西,然后 然後如果你是你你你剛才那個銷售模式配的也是離線的, 也沒關係,我們這個訂單全部保存完了之後呢也會實時去看的,如果 我們也會把這個訂單實時上傳上去,所以說HQ server上,我們的HQ server上呢, 一直,如果說 門店的網絡和互聯網是全部是OK的,每天是一天是OK的,那每個pose機的訂單,實時的就直接就傳到了HQ server上,然後HQ server總部呢就直接就可以拿到這個數據就可以去得出自己的報表還有統計,或者說實時的庫檢庫存,這也是為了實時的庫檢庫存啊,很多的這種 業務上或者說的一些需求來提供的。 那這是實時的,然後如果是離線的話,離線它是定時網絡,這個pose本機呢,它有一個database也有一個服務,它會定時輪詢呢,就是說,我去會請求去探測,這個是https的,這個這兩個都是https,那他 会去检查网络，定时的去轮询请求，哎，这个跟HQ这个网络有没有OK啊，如果OK的话，我就立马去上传这个订单。那这个的话都不影响我现在的业务销售，这都是异步的，然后发现了，如果说检查是在线的，就是启动这个上传，然后上传这个就行了。然后还有一个就是我们在为了保证所有的这个门店的这个数据，销售的数据能够上传到HQ server上，我们在几个关键的触点上都做了控制，比如说门店闭店，需要门店闭店，还有一个就是在交接班的时候打打印那个交接的收银小结，以及闭店之后打收银总结的时候呢，还有打印完成，后关闭，整个关店，关店的时候，关闭pose呢，有一个打印这个流程，在这个流程过程中呢，我们全部控制了这个东西，如果说提示这个网络，提示收银员，如果说这个有离线的订单还没有上传，会提示他，然后没有上传成功的话，上传成功之后呢，就打印收银总结。 如果说是离线的时候呢,我们会提示他,你要不要就是今天把这个订单上传上去,因为这一块是不可控的了,因为比如说店员要马上要下班了,然后又不能加班,然后怎么去处理,那这个是全是人工的,然后,但是打印出来的收银总结,全是今天真实的销售所有的数据,这个不会有任何的差异。 然后这B店呢,B店的时候呢,也是收银员退出POS的时候也会提示这个事情,那这两个就是两个流程了,就是说打印收银总结,这个请求呢会检查这个订单,然后等待这个东西,提示收银员,然后检查网络上上上传这个东西。 那开店也是一样的,如果说整个其实我们的收银总结打出来的账,就是门店其实每一个阶段其实有一个收银长短款的,就是当天肯定有一个收银长短款,一般的话,如果网络好的话,基本不会发现,不不会发生,但是偶尔会发生 这个收银长短款的事件，收银长短款的事件呢，其实就是说，比如说我的收银员其实交上去的现金的钱呢，跟我们收银报表，就是说总部门店的收银报表，对起来呢， 或者有可能比我们的收银报表，只会比我们的收银报表多， 就不会比我们的收银报表少，少的话是另外的一个事件了，可能也会发生，那是另外的一个事件。比如说这种这种事件的话就是说，其实就是当天的订单没有上传到，比如说像像现在的这个方案的话，没有上传到这个HQ server上去，没有上传到HQ server呢，其实就属于第二天了，第二天去开机了，post开机的时候就是上传，然后收银长短款的处理呢，我相信我不我不知道，因为我不太了解咱们大华是怎么处理，一般的话收银长短款的话是一周盘一下，或者说一周处理一下，或者说一个月处理一下，反正是要处理掉这个收银长短款的事件，因为他订单只要上传上去之后呢，他会整个把 上作品的,賬是自然會評的這一塊的,所以說第二天門店要開機,然後門店開機,開電的時候開機,然後就把這個訂單也會及時上傳,那整個的話就保證這個 機上的訂單 全部上會上傳到這個線上去,就SQL server,那最終的報表會跟我們整體的賬務全部會評,這是一塊的一個東西。 那還有一塊的話就是這個啟動,啟動的話就不太一樣了,就跟之前了,然後我們整個的啟動的話,其實就是剛才多了二級,二級的方案的多了三級的這個store server的這個東西的話,就沒有從CDN上去下載數據了,其實是同步這個HTTP數據,同步本地訂單的數據,然後這一塊的,然後更新app,然後檢查可連接的這個設備,然後啟動登錄,然後更新app的SOP呢,我今天就沒列啊,就上次應該是書散提的,然後這個東西今天 就魅力, 就是怎么去控制这个更新APP这个东西,整个的这个流程是这样的,就是启动检查这个版本,然后这个也跟爱解是不一样的,就检查HTTP版本,然后检查本地的订单,然后同步,然后这样,然后主要的是下面的这个I3级的一个部署,我就过的就比较快,然后主要是留给讨论的时间,然后的话,这个是一个 我整体的理了一个大块啊, 不能说是理了一个大的功能模块,细节没有理,我相信所有的基本上是这样的,比如说这个用户权限,这是最主要的,然后电务场景就是咱们一边的电务的这个业务的一些功能,然后销售场景就是pose专门的一些销售,电务是电务,销售是销售,然后促销的配置,促销的计算,购物车,数据同步,还有backend,这是HQserver呢,爱层架构和三层架构呢是全部支持的。 然后server在这一块呢,我们只是做数据同步和下发。 这个的话就是三级不支持,然后的话就是pose的销售场景的话就是销售场景全部支持,然后促销是全部不 销售场景支持非全部,然后这个也是促销支持非全部,比如说这个为什么销售场景 支付非全部呢,比如说这个断网了之后呢,就是整个的门店网络断了,其实我们有些支付方式,现在的支付呢也是用不了的,所以说是支付是非全部,就是跟这个网络有关系了。 跟设备,跟网络,其实就是跟咱们现在的一些支付方式是一样的,然后促销的话,比如说这个也是非全部,因为咱们现在的促销我看 应该都能全部支持,但是国内的话像做的这个促销就玩法比较多了,你比如说那个像跨店的门店限购,就是说总部一个区的这个门店有一个限购的活动,这就涉及到库存的锁定了,然后这个东西的话,这种机制,local的机制,你们店 的这种内网的本机的这种销售模式,你肯定支持不了的这种东西,要锁定库存的, 这个是锁定不了的。 然后购物车是一个,这个数据同步一个,所以说这个从本身的销售场景来看,就是说 register这个销售场景, 跟我们HQ server的这个销售场景,出销这些计算,购物车数据同步,完全是一模一样的,就是说这两个呢,除了一些网络,还有一些这些出销,如果我们以后涉及到这些出销的话,会不会支持,然后其他的都是完全是一个标配,所以说针对我,我看应该是咱们大华现有的这些出销啊,还有销售场景完全是支持的。 这是,这是一个比较。 然后还有一块呢,就是除了这个比较呢,我没有跟现在的咱们大华的这个拉克还有的这个三级方案做比较,那刚才在开始投的时候跟聊的时候,其实就是那个一点 区别,就是store server呢,就是如果跟现在比较呢,现在的store server提供了电务能力,提供了电务场景。 这个没有提供电务场景,然后还有一个backend,就是store server提供了一个电务场景,又加了一个backend,只有这一个区别。 这个是一个data flow,这个data flow就能看得特别清楚了,就是二级的方案,就是二级的方案是这样的,就是post全部去CDN上去下,然后包括商品的呀,促销的呀,以及员工的信息,也是GP权限,这些全部去HQ server上去下。 嗯,然后三层的话就有一个分 分压,就是分解压力的这个东西,那每个门店的store server是不一样的,是是独立的,所以说的话,你看post,然后去http只是从store server上去下,然后这个是一个内容介绍,然后的话,store server呢是 从CDN和OSS上去下载,这样的一个过程,所以说这个,这个下载的速度呢会更快。 然後server呢會整個全部使用我們門店的網絡,就三到十兆的那個那個網絡帶寬,然後去CDN上快速去下載,那這樣的話這個數據同步會非常速度非常快,這是一個。 這個員工權限也是一樣的,然後從這邊去下。 那整個的這個優勢呢,我總結了一下,就是愛層的方案呢,其實我們現在在國內也推埃及,就是有一些大體量的,然後門店的網絡環境也比較好的。 確實有些門店門店的網絡特別差,但是 他們又不要脫機的東西,所以就比較複雜,他們想使用那個門店的server做服務,然後他們的pos機呢,配置比較性能比較低,直接是上面就沒有本地服務,直接連的是server,這是一種三級三層的部署。 還有一種就是跟咱們大華現在一樣的這麼一個三級的部署,這個國內都有幾種,然後這個埃及埃及的這個 優勢的優勢是什麼呢?首先降低了門店的運行成本,首先我們門店的server呢這台機器,就是那個小的機房, 會沒有了。 然後也不需要用為了,也不需要去監控它了,也不需要去那台機器,就是沒有那台機器之後呢,就少了很多的事情,就是門店的運行成本它肯定是降低了很多,然後技術部門的這個工作效率,他不需要去去管他,這個我是只是從IT部門的這個技術用為的角度,它不是一個業務用為,是一個從一個IT部門的這個硬件網絡的一個用為的一個程度來說,就是提升了這個工作效率,他不用去判斷那麼多的節點。 然後第三個的話就是就是不用判斷他就提升了他的整個的技術部門的這個東西,然後還有一個就是降低了技術用為的成本。 然後它的三級的這一塊的這個優勢呢,其實是數據同步同步的成本比較 ,我们刚才看到这个里面有一个OSS和CDN,这两个其实要收费的,就是说CDN加速呢也是要收费的,然后OSS本身的這個流量呢也是要收费的。 这两个。 这是一个成本。 啊。 然后这个数据的成本,然后三级的话,你你上面只下这么一次,然后刚才这个pause呢,每一个都要去下载,那这个成本是应该是一个量级的吧,这个级数不一样的,这个成本。 的一个变化。 然后这一个数据成本比较低,然后这个是从内网上下,那数据同步速度比较快,然后这个呢就是数据成本比较高一点,然后然后速度稍微慢一点,这个当然这个慢取决于一个相对的,取决于比如说我们的 我们的数据的生成的这个每一次生成的这个数据别说特别大,假如是这个比方比如说是20多兆,几十兆,然后怎么样,如果我们做增量,基本上会做到比如说 依照以内的这种增量的话，那也是非常快的，这个东西，那这是一个相对，时间和空间是一个相对而言的一个，一个比较。然后整个的话，三级的一个缺陷呢，就是说那个门店的运行成本比较高。你像store server虽然第一个这个技术方案，store server的话，第一要监控它的这个健康。然后store server上面的数据的database，然后所有的东西要跟这套数据呢，首先要在平台上去监控起来。那store server如果出现问题了之后呢，平台要给咱们的技术部门要预警，就说，我这个store server出问题了，我不再线了，五分钟之内掉线了之后就会发一个email，比如说这种机制。那这些东西的话都会提供一些，提供这些东西，那这样的话这个平台的這個本身的这个运行机制它就非常高了。然后再加这这些成本的话，再加上机器的成本，还有人的成本。电务的成本，就你你要为这件事要分配一个工作人员，那这个工作人员只要有工作  那要素查完了之后结合埃及三级,包括咱们大华现有的一个方案,这个我认为是三种方案,这三种方案的话, 到底怎么做? 大华我包括我们互动一下,然后整体得出一个初步的一个要素吧,还不能说定论,然后拿着这个要素,比如说拿几个属性, 比如说从二级,埃及的方案如果大华要使用的话,比如说阿里要提供什么样的要素,我才能可以用这个方案,或者三级可以用,要不就是现在的或者的这种方案,整体这些要素能能得出来,今天是最好了,然后下一步的话,我计划是 得出这些要素,我再准备一下,然后 再进行一次确定性的沟通。 这是一个比较我我个人的一个计划,整体完了,谢谢,然后看一下大家就互动吧。 谢谢云勇哦,我我先,我先来一下哦,那个 就是听完你的 講解我還是就是滿滿的問號。 嗯。 你講。 因為 關整個聽你解釋下來 嗯。 這個三級,三級的規劃,等於說十多,十多server這一塊,等於是你硬拆出來的一個部分。 那看起來呢,它其實跟二級其實是沒什麼區別的,然後反而還 我們還多了一個server要放在店裡面。 去maintain它,所以這個 這個三級的部署,看起來是有點怪啦,這是第一點,那第二點就是在那個 online online的部分,我們聽起來是沒有什麼太大問題,但是在offline的部分呢, 嗯。 這個我不太清楚,你可以 你說哪個offline是哪個? 第二個還是第三個數據同步的offline。 數據同步 那一塊。 這個嘛,upload的嘛。 對對對,對對對,你說這個是必須要去切換是什麼意思?是系統它會自己切換嗎?還是我們必須要人工? 自己自己。 人工不用管這件事情的,它是,它是服務在檢測這個網絡的狀態,它自動檢測。 網絡好了,他就上傳上去了,跟人工不用管這件事情的,就機本身人,就是就是我們的 收銀員 對這件事情根本毫無感知,他不知道這件事情發生。 他不知道這件事情發生。 對。 他如果 他也不需要,他唯一知道的,有幾件事情是知道的,只有這, 會跟他形成一個互動, 就是說,比如說 我這時候要打印這個收銀小節嘛,還有總結的時候, 你要交接班嘛,交接班。 那你,你交接班的時候就你有這個,我們就相當於 赋予收银员有一种义务就是，你要把你的订单要检查一下是不是有上传上去了。 其实这个事情呢，只是跟这个pose进行了一个互动。 那这样的话我会，我的服务会检查这个网络状态，然后如果说有未上传的离线订单，就是属于你自己的这个上班的这个时间，工作的时间的这个订单没有上传，就只是提示他，你要不要上传。 啊，你要上传你就点确定，你不上传你也可以打印这个是，你也可以打印这个小票的。 就是这个。 我的问题是在于说如果今天 嗯。 卡或者店里面他不知道这个pose已经offline了，就是网络有问题的话，他没办法回报给我们IT去做troubleshooting的话。 那这个东西会不会积累太多，而且会不会影响到我们那个pinpad的 上传。 你你说的另外的一个事情是这样的，就是说所有的收银，就是门店的这个网络，我刚才 不是说有个心跳嘛。 这些心跳的机制的话,在我们的平台上都有设备了这个监控,这个心跳的话,我们可以设置,设置完了之后呢,比如说半个小时, 就是这个心跳的话是跟人的心跳一样,比如说这个一分钟跳多少次嘛。 我们其实是就是模拟的这个东西,就是说五分钟如果有心跳,就是有信号传进来,我我默认我就认为这个post机是在线的,它就是个健康的。 如果超过五分钟,然后有半个小时没有上传,这个去调 这个阀值都可以去调,然后完了之后呢,就预警了,就是直接就发给我们的相关的这个email这个人,就要去看了。 这是,这是第一个事情。 然后的话,你讲。 就是你们设置一个预警系统给我们的那个。 OK,OK。 嗯。 了解。 然后,那你讲。 OK,没关系,你继续,我我讲的,我我要讲的是另外一个,对,你继续。 对,然后我就说这个心跳,心跳是跟 您刚才说的那个就是说这个pos机掉线了,或者说到时候我掉线了,这个有预警的这个东西,所以说我们肯定RT部门会首先会知道这个pos机是掉线了这件事情。 这个是掉线了。 然后的话,这是一个。 然后我们在这个就是我们所有的订单, 在这个上传, 就是上传这个订单,这个收银员怎么知道,有几个触点,我刚才说了,就是说第一个是 打印收银小结和总结, 当前的这个收银员是知道的,就是说你有没有订单,你的订单还有没有上传上去,这是第一个触点,然后还有一个就是关店前,收银员退出关闭pos的时候,他也有这个相应的提示,所以这件事情呢是 很好解决的,就是说订单一定会保障这个上传的。我们没有我这套机制呢是,我们默认这个网络是非常OK的,但是我们在网络的异常情况下呢是有 一套机制，去可以提供出来，就是比如说pos掉线了，然后我们有有IT部门会首先收到这个信息，然后还有一个东西的话就是 当前的这个pos机，pos机不是那个app不是很大的一个屏幕嘛，其实在上面比如说下面那个导航栏的时候，那个导航栏上其实有一个，有一个类似于网络状态的那么一个红色的就是相当于相当于这种一个标 标志。 那这个标志的话只是显示在那，不影响收银员任何的收银操作，那收银员看到了那个东西的时候，他也会主动的来告诉我们，这个也是他可以去做的，这个只是放在他的我们店员的一些操作习惯上，不是这个怎么说，不是操作习惯，这个应该是说他店员的一个工作吧，工作的流程呢，他他愿意那样去看那个东西，他上报了 没有关系，因为整套机制的话， 如果你离线 那我们默认你就是离线的一个状态。 那我们的订单的话在 加上刚才的预防机制， 半个小时， 或者说多少分钟，然后超出了这个时间之后呢，我们的IT部门也会知道这件事情的，我们不急。然后还有一个的话，在你打任收银小结总结的时候也会提出来的，你会人工干预，这个人工干预就是你找IT部门来给你解决啊，还是怎么样呢，都会去处理的。 一台POS机，我不知道咱们大华的订单交易量，其实一天的订单交易量的话， 我现在记不得那个数字了，其实基本上也就是上百单吧。 一天成交。 一台POS。 几百单吧。 对，几百单。 最多的，然后因为一个一个一个单的话，它有一个时间的，你要扫码所有东西，那国内的收银员还有一个收银比赛呢，就成交单就是扫多少商品几分钟完成。 其实算下来一天工作那几个小时就是几百单。 所以它的 单量不是很大的。 好。 好。 了解。那下一个问题就是那个，就是那个file的格式啊，这档案的格式。 对，因为这个东西看起来跟我们现在的file传输方式其实差不多，所以我可以把它理解为说你们会，你们会把这些档案放在一个档案夹里面，然后从那个档案夹去做传输吗？就是一个share folder。 嗯。 然后去做一个传输的动作吗？是这样没错吗？ 是的。 是这样没错的，我跟您看一下，这个N的话其实就是一个，它是一个HTTP的server，它的刚才您说的那个folder呢，就是它的一个文件目录。 那这样的话我通过它的HTTP server就可以下载它那个目录的文件。 跟SFTP或者FTP是一样的。 嗯。 OK，那如果是这样的话，你们一定会遇到一个问题，就是说 呃,今天這個檔案的 格式, 它突然間呢,就跟你們預設可以, 就是那個 database可以fit的那個檔案,它沒辦法fit到database裡面。 所以這個檔案一定會stuck在那個folder底下。 那當它不是因為network的原因而stuck在folder底下的時候呢,你們要怎麼去處理這個問題? 我們這邊呢,辦法是這樣的,這個,這個我沒有寫這麼細啊,所以說會有這個store service,store service層呢,它肯定拿到這個數據呢,拿到這個數據它會做解壓,它會在本地執行。 然後它先放在一個 呃,可以說是它放的這個目錄呢,叫ready的目錄,它不不不能說是讓你去執行,就是一個一個正執行的目錄,然後store service去執行完了之後呢,post不會去,他找不到那個目錄的,然後store service 执行成功之后呢, 执行成功之后, 它会把那个文件呢放到另外一个目录,那就那个文件呢就是一个 OK的目录,因为它的server呢这个呢也是这些,它只要执行成功,这个post也会执行成功的,所以它是做了一层校验的,然后放到那里,它就下载成功的,然后没有执行成功的会预警的,上面来预警的。 这是一个方案,我只是您问到了这个一个东西,还有一块呢,我们server在生成这个东西的时候呢,就是生成完了之后呢,有一套,就是在OSS之前呢,又有一个执行,有一个备份库,那个备份的database呢,我们会去执行这个库的,就是里面执行,然后去校验这个脚本的。 这个脚本如果出问题了,它就不会生成,马上就要预警了,就要处理,其实源头就这我们就会控制了,我们有两个控制节点。 你说马上会处理是谁要马上处理这个问题? 嗯,就是会发 mail,就是這個文件會為什麼會生產,因為這些任務的話,生產這些數據的任務都是我們按照數據的腳本來處理的嘛,就是按照服務來去處理的,這時候這個故障的話,可能我們就是咱們T部門這一塊的介入可能就比較少一點了,因為他這個不是從電視不是寫那種的腳本,他是從那個服務的腳本,那具體的話這一塊技術,我們現在的這個標品的這一塊技術,然後完了之後呢應該發給這個阿里的人員,然後去弄,一般這種的話不會出現大問題的,就您擔心的這些問題的話,都是比如說 我我遇到的啊,我遇到的。 一般的話,比如說那個字段, 原來的那個文件的名字的字段呢,就是那個商品的,名字的字段是100,然後其實有一個特殊的商品名超過 100，然后这个数据就插不进去，会出现这些东西。那这些东西全是就是之前不稳定UAT的时候就会把这些全部屏蔽掉，所以我们在字段的时候呢， 会跟咱们大华这边就会去同步，我们的商品的这些数据结构啊，就是数据库里面字段到底有多长啊，到底有多少啊，这些东西全部是一样的。 所以说这些只要这些字段全部命名是一致的，不会发生更改，那基本上不会出现这个问题，而且我们在您说的出现这些问题之后的处理是另外的一个策略，然后还有一个的话，我们在之前的话就要把这些全部屏蔽，就预防这种事情发生，因为您都知道会发生这些事情，那我们发生这些事情大的，为什么？因为哪些原因操作出现的，我们就全部会屏蔽。比如说这个会出现的原因，比如说这个HQ server上的这个数据库啊，跟这个server数据库，包括这个post server数据库，本来它这个数据库版本就不一样。 我说的数据库版本就是它 它那个表结构就不一样,或者说用咱们现在的的这个东西,就Excel的那个上面的标题,就是标题都不一样,那个行,头都不一样,就head都不一样,所以说这个肯定就出问题了,这个差,一般的话不会出现这种问题。 都是执行成功的。 OK,那如果当这个问题出现的时候,你们就是阿里的系统会不会有一个就是 daily lock,就是把这个 事件给记录下来,然后就是 他这个file是从哪里产生的,然后时间点是什么时候,这个会有一个记录吗? 会有,会有,会有,就是刚才您您刚才您会看到这,就是,我给您看这个。 就是我们生成这个文件的这个文件,什么时候生成的,你看这个文件名吗? 然后这个会看得特别清楚,年月日十分秒,其实就是生成日 時間,生成的時間,然後順序碼,這些都有,然後這個什麼時候生成的一看這個文件夾點就清楚,這個文件名也就清楚了,一個的話是來源於哪個門店都非常清楚,所有的。 好。 這個東西我們可能要再詳細規劃討論一下,因為這個對我們影響其實蠻大的。 我明白你說的,其實我也想到了,就是你提其實還有很多細節,因為 我不知道會不會未來出現這種啊,就是 我不知道現在的和有沒有出現,比如說改表結構的。 就是改它的文件結構的。 斷的問題一定會發生,就是即便你把它規定的好好的,它還是會會發生的,所以就是說要怎麼去快速的解決這個問題,就是可能就我們必須要研究的地方。 對。 OK。 这个我下期也会考虑一下的,就是把一些那个预防机制吧,我下面会单独做那么一天的这个方案,就是不不类似于方案吧,就是一些一些这种预防处置的一些机制。 我会列上去的,嗯。 好好。 谢谢。 谢谢,那我我这边就先暂时这样,看其他人还有没有问题。 哦,我这边我想问一下,就是补充一下那个Peter刚刚问的问题,就是除了就是预防之外,那就像刚刚Peter有讲到,如果说这个文件已经到了在就是store server那边,然后如果他发生问题的时候,那怎么去处理? 就是说会不会说我们是希望他不要挡住就是其他正常的file。 就是说如果这个file已经有问题了,不要一直就是在在就是停留在那边,那可能就是说我们试了两次三次不成功,那我们就先把它skip掉,把它放在一个就是error的    这一周执行了哪些问题, 就是出现了哪些问题, 然后出现了成功, 其实一般这个故障率不是特别高的。 我不知道我说的这个 解答您刚才说的这个了没。 Hello。 哦,不好意思,刚刚mute掉了。 嗯,对,我们可以在就是讨论他还有什么一些突发的状况吗,对,我们在 再再就是全部在一起,就是一起处理这样。 您刚才说的那个,就是我,我觉得Peter跟您担心的那个问题的话,其实是一个整体的,就是文件的同步下载,然后这个完整的一个 体系性的一个方案,这个的话要单独罗列了,因为我今天主讲的这个的话是一个部署的,然后穿插这些东西来讲。 然后细致的话，其实，其实这个文件同步这件事情啊，就是第三项， 就是第三行，第三个这个，这个， 这个呢要 写得非常详细，要帮我们确保的就跟你，包括Peter跟您说的一些预防的机制，包括怎么处理的完整的方案，那有一个单独的这个文件同步的方案，要要单独写的 这个机制。 这个是比较细的，因为我们要细化到每一个，就是我们最终上的post 到底是一个什么样的数据同步到一个什么样的程度，我们全部现在是要把这些写出来的，包括 我的item，包括我们的表结构，就这个脚本的一个规范，然后所有东西我们全部会全部列出来的，因为我们列出来一个是为我们自己，二一个的话就是咱们大华的人看到这个东西，认为这是一个可行的方案。 他就是OK的，他是没有问题的。 不是我们说他没有问题，就是没有问题，而是我们共同看到这个方案的时候，诶， 这个机制，这所有的东西都是没有问题的，他就是OK了，这个的话我会单 羅列一個東西,我會把這個方案寫出來。 但是這個要花一點時間。 原用這一塊數據的部分,可能真的是必須要單獨拉出來,然後可能要詳細的討論一下,因為這個會關牽扯到IS跟IT兩個部門。 他們我們對那個檔案結構的的理解的部分。 所以這個可能可能要麻煩你一下。 但是我這邊的話, 我得根據我們內部的一個,就是我們阿里的一個 整體的一個節奏,因為我這些的都是提前的。 都無關於業務的,無關於字段的,無關於,您您發現我整個方案的話都是一些技術性,或者說邏輯性,然後這些東西,然後細化的話,比如說這個字段的細化我就細化不下去。 比如說這一塊,這個字段就細化不下去,這些東西,因為好像這一塊的話業務,因為post還沒有開始做嘛,還沒有聊咱們這邊有哪些字段還有什麼。 我不知道,就是属于业务聊完了之后呢,我这边才会有设计出来这些东西,然后就是说在所谓不是设计出来,就是结合我们现在标品的一些东西,它肯定有一些字段是不一样的,有新增的,有变更有一些东西,最终的话是完整的跟UAT的,就类似跟现在咱们上的那个数据库是一样的,就是真的是咱们大华要使用的那个库,那完整的时候要更新那个,所以这个这个方案的话,我我可能会先写出来一个东西,然后慢慢的更新,更新到最后,我们先看这些预防的机制以及这些大致的这些,我说的大致的不是说特别粗,还是大致的整体的流水线,以及一些要素点都是OK,然后完了之后呢,像这些,像这些的表啊,这些东西呢,逐步业务清晰了,然后所有的就是整个产品设计,然后定制开发是所有的东西清晰之后呢,然后把已经UAT上的那些东西呢全部再复制上来,再变更一下,就升级一下,更新一下。 那可能这个方案最终的话一个方案， 就是可能 方案会经过很长的一段 就是完善，完善完了之后就是最终的一个方案了，但是一些流水线概括的结构是不会发生变化的，我不知道您同意这个不？ 可以呀，没问题，你们那边不改，那这样吧，因为刚刚那个James也给我一个很好的建议哦，他说我们可以先准备我们这边就是我们已经预期到会 发生的事件，然后写在一个表上面， 对对，然后让双方都可以参考一下，或者是你们可以按照我们的 呃困扰去进行资料的修改或者怎么样。 明白。 你觉得如何？ 可以，谢谢谢谢，特别感谢。 对对，那这个可能就是请我们南北家的team都帮忙，帮忙整理一下这个东西。 对。 看一下这个方案还有什么，其实最主要这个方案的话就是 的說的,就我們的這個三級方案呢,其實我們更傾向於二級方案,就是三級方案的話,我們真不太想做那麼重,因為三級方案就是跟咱們現在和RTR一樣的話,把這個,我編輯一下你就清楚了。 就是我編輯出來一個三級的這個方案,我隨便把這個文檔換一下,就是咱們現在的RTR的這個方案。 你看咱們RTR的方案是這樣的。 咱們RTR的方案是電務場景。 包括用戶權限,可能都是下沉的,你知道吧?然後下沉到這,然後包括這個都下沉到這了,然後這個數據的話,在這,它是不是下發了,就是上傳也有了,因為它本地改了之後呢,它的這個在這改了之後呢,這邊就沒有了。 那這樣的話這個這個數據還要同步給SQ server的。 然後你比如說改商品改了一個價格,改了一個促銷的價格,那他的 HQS要保证这一套数据的，它要同步上去，然后呢，它又要把这个register这个数据也要同步下来，然后这一套，然后我们的backend全部是在这来操作的，然后数据它的上游的数据是这样想法的。 我这个列的应该是咱们现在lack和RTR的这个方案吧，Peter你看对不对？ 对对对对对对。 对吧。 其实我们更不倾向于这样去做的，因为我我们分析完为什么这样不做这个方案呢，就是我我再把它还原一下啊，就一会我再还原。 来回切，我们为什么不倾向于这种方案呢，其实我认为star server现在在整个的网络，就是我回到这个上面这个， 这个网网络的时候， 因为我这边我再打开那个二级的啊，这个二级的方案。 我们今天把一些要素聊聊聊清清晰。 就是二级的方案。 其实我们这边只要保证这个HQ server这个SLA的这个 可用性,就是說這個 這個 是四個酒還是幾個酒 不出問題,然後我們又是雙線,因為我調查咱們的網絡是一個雙線的機制,這個這個是在之前,我看 我是做這個 我有內部的 不打開了,就是說這個三兆的這個網絡的話,其實是我們在門店做了一個雙主從 這麼一個雙網絡的。 其實有這個雙網絡的可用的話,其實我們跟跟整個的這個互聯網這個通訊非常可靠的,就是那個故障率會非常非常低,我們有沒有,就是我們 有必要為那0.1%的事件去做這麼一件事情嗎? 然後我們為這0.1%要做什麼呢?就是解決他的銷售問題。 我們的呢是可以去搞定他的,就是說我可以只要保證我的post銷售就行了。 然後還有一些的話,只要我這個網絡出現 问题了。 出现问题,我的 我能及时的去调整这个业务,让这个业务的这个销售价格能撑下来就OK了,是这样一件事情。所以说借由主从,所以那个概率是非常非常小的。然后唯一的一个东西的话,就是我们现在的这个网络,就是我们现在的这个lac的这个东西。 之所以存在这样的话,是原来那种结构性结构化的服务,它是不够支撑的,就是原来lac还有他原来老的程序的话,它不支持这么远程的这种互动的服务,它的技术跟现在的技术不一样,我可能 我可能这个分析是有问题的啊,但是我了解到的是它是文件式的这种服务,其实它是一个client端,然后database,就类似于原来那个PBE啊,basic一样,然后或者说跟那个就是跟数据库直接打交道,然后完了之后呢,我直接销售,我说都在本地完成,它是由于它的技术限制了它,如果原来的技术,就是这种网 就OK,然後能提供這種服務,它的完全完全這一套服務就可以去解決掉,就是完全可以解決掉。還有一個這個歷史的原因呢,我了解到到的就是我 我了解到的,也跟一些人請教的,就是為什麼從很80年代到現在一直有這個三層架構,就是原來的網絡不是特別好,還有一個原來的儲存,網絡儲存不是特別好,所以他需要這種中間的服務去去承擔他,負載他,所以就導致這個架構一直是延續延續延續到現在的。所以我現在結合現在這個網絡,就是我們三到十兆,我看到咱們的網絡是三到十兆,然後又做了主從,所以我們的包括我們的平板,比如說我們現在的postmate,還有Uber,其實就是連著這個不管lac的這個HQ server也好,或者說連著這個就是它的雲端的這個系統,就直接連的互聯。那這個出了問題,如果說他的這個網斷了,他怎麼去連的呢? 所以说这些问题都是存在的,我们,我们要去解决它,比如说我们,我们想到了我们提供的一种方案,我们现在有些人,有一些客户他会提提到这个,他说万一呢出现了,其实我们现在的一些东西呢,你如果出现万一的情况,那就四季。 你backend的不是这台机器吗,我给你配一个四季的网卡。 就是四季,或者说现在的5G,你配一个网卡在这,然后这个网卡可能它有一定的费用,但是 它是一个流量式的嘛,你不使用的时候,你 只要出现网络不OK了。 网络如果出现不OK的时候采用它,你网络OK的时候你就不用到它,其实这个费用非常低的,所以就backend的去解决了。 这个问题,然后整个的这个store server,如果说需要这个三级的这个store server,确实要存在,要去分解这个压力。 就是说刚才的这个成本,就是我个人的一个建议,就是说,如果我们的这个 我们评判下来说这个,这个数据吞吐太高了,但是我认为它也不是不,就看这两个成本 是怎么 對比了,就是咱們現在的這個成本,還有這個數據同步的成本,網絡成本,我相信這個網絡的成本肯定是比這個,比這個成本要低低很多了。 所以這個成本下來的話, 我們只能,我們只保證這個網絡的通信,OK就行了,那這邊這個沒連上,那我們實際的這個網卡直接連上之後,去改了這個數據,說這個server出現問題了,或者這個這個出現問題,都是雙網絡的。 雙網絡的這個問題,故障你馬上就可以工程師去維護,不可能,除非就是整個門店斷電了,那網絡整個不同,網絡整個不同只是能生效,但是其他就生效不了了。 其他就生效不了了。 那唯一唯一的就是這麼一個場景會出現,但這個場景的概率有沒有,或者說就咱們大華從業務的角度,一定不能光聽我從技術的角度去分析,一定還是要從業務的角度去分析,就是咱們大華的一些業務,因為 你們才是真正的這個系統的使用方。 包括业务部门也使用,如果产生了业务问题,就是影响到业务的用性,其实影响还是比较大的,所以一定要站在业务的角度,或者站在业务部门的角度去考虑这个,如果确实需要这种机制,我们也可以 就是说 虽然我更倾向于这个,但是我们也不得不退去求其次,就是说,我们承下来,我们把backend的这个电务的这个东西也承下来。 啊 就承下来 的话,的部署啊,很多东西啊,这是另外的,这可能就是承下来的话就会跟我们现在的标品的能力,就是我们现在标品的一些能力,定制上的话,就会增加一些工作量。 这是这样的。 因为我们现在整个在国内我整个推的话就是这么一套方案,就是我这个,我只做这个数据同步,你们担心这个网上的这个下载太慢了,你你们担心这个还有一些预警啊,你说post这个 不方便, 然后我们给你提供这个，我们也提供这个三级，只是这种三级跟这个三级的这个对业务的影响度就是不一样的。 我整体是这样的，看一下Peter Michael 蔬菜还有呢。 看一下，咱们是怎么样的的一个考虑，能不能说一些关键的因素点， 或者咱们是怎么考虑的。 了解，了解你，你讲的，你讲的东西，那 就是我们一开始有讲嘛，就是这个东西二级三级架构我们会先做一个内部讨论，然后讨论，我想应该是很快速就应该会有一个结论出来啦，所以这个我们会尽快跟你们update，就是 就是我们最终想要用的架构是哪一个方面。 嗯。 这个我们我们会讨论出来，然后再跟你们做一个 做一个update，这样好不好？ OK，OK。 所以你 好，然后还有一个问题，就是说，因为你刚好也讲到了 呃 就是80年代那个三三层架构嘛。 嗯。 那我我我没有challenge的意思,我的意思是说, 因为像 之前80年代那时候也是用档案在做传输,那为什么现在阿里也是就是用那个file在做传输呢? 这这一套是是有什么 concern把它保留下来吗?还是 嗯,并不是说为了保留它,这个里面有有两个东西。 首先这个首先从文本这个东西,这个这个方向, 就是文件传输啊,那个文件传输跟这个文件传输还不太一样。 呃,首先我们了解两个文件传输, 我我打到这啊。 哎? 是这个。 嗯。 对,就是想了解一下为什么,因为对我们来讲,其实档案传输会有一定的风险,而且它不是那么的 及时性。 对。 所以我们，嗯， 我跟你，我跟你说一下。 对对对。 了解好。 我跟您说一下，这个为什么有这个文件的保存呢？ 虽然这个量太大了。 就是说比如说这个字段，这这这里面改，比如说我们改100个商品。 呃就是100个，100个SKU。 100个SKU的价格名字。 呃以及很多东西。 呃 然后包括一些促销活动，然后加上了，这个数据量通过一个 API去传的话。 API返回来这个数据量就比较大，而且API还不够稳定，就是说它比如说， 就是我请求会非常慢，然后会，会把服务就宕在那里，就是说他就，他就等待，wait，他一直在wait那里。 wait。 然后尤其现在的这个技术，就比如说这个，比如说Java的技术啊，然后wait线程wait的那里呢，如果说长时间的wait的话，不关闭，然后会造成这个线程一直， 越来越多，越来越 多的话,它的压力就比较大,它就影响它的这个业务性能。 然后文件的一个好处是什么呢?这个文件的一个好处是什么呢?我把它装在一个文件里面,我通过文件去传输下来。 然后但是这个文件传输也跟以前发生变化,以前是SFTP或FTP这样传,那现在是http,你就下载下来就完了。 但下载下来的时候呢,我就是解压,解压去执行里面的这个文件。 那这个执行文件呢是 是把这里面的脚本全部执行进去,然后到database里面去。然后比如说原来的数据数据库可能跟现在不一样,比如说现在本地的数据库都是te或者说Mycircle这种的,原来老的呢像80年代那時候呢,其实它都是一些文本。 你看到呢那个都是 比如说以逗号啊,竖线啊这种的文本协议,文本协议,还有后来呢又转成那个access,就是那个Excel的那种格式,像那个AS400啊,这种的,老的一些pose用的这些这些 那夫妻,然后他都是那种文本的记事器的这种模式,所以这种从储的格式也发生了变化,原来用文本的话我直接替换就完了,就是说,我比如说我拿到一个文本,像我们 像这种文本就一行,然后第一个前几格,就跟我们那个,就说,的时候,这多少行,这一行,然后第几个字符是什么,第几个字符是什么,然后用逗号隔开的,然后这个东西的话,文件直接同步下来,同步下来呢,就增补, 增补去替换, 然后一个的话就是去替换,一个的话就是补到原来的文件夹,文件的下面,就那text就是补在后面,加在后面就完了,所以这他们原来那个老的系统是非常方便的,这个是原来的老的一套技术,它也不是技术没有先进,只是说,呃,本身他原来也是很好的,但是只是结合现在的一些互联网的,的这个业务模式呢,它支撑 支撑度就不行了,支撑度不行的话,现在的话就是全部 换成这种数据库。数据库的话就是我刚才说的，就是这个，首先第一个这个返回的数据量太大，数据包一太大的话，http这种API的话就不行了，这是一个zip，然后像我们又保留了这种，你看这种数据就比较少了，你这个数据就这么一点，然后这个，这个API的这个访问就特别快。 啊，就API访问特别，立码就 反给服务了，服务就立码得到这个数据就处理了，这就是实时的了，然后包括这个订单数据也是一样的，我就是实时的，我们就不用文本的这种了，唯有一个这个，这个是保留的，这个文件的这个东西。 然后还有一个类似于就是，还有一个就是APK，APK的那个，就App的升级，它那个文件呢也是以压缩包的形式。 是这样的。 OK。 嗯。 好。 伟伟，你那边还有其他问题吗？ 我在想就是说 除了像這樣子文件,那是不是有可能就是說用資料庫之間的對接,直接對接,然後還是說這種方式會有另外的一些就是有什麼利弊這樣子。 嗯,您說的資料庫對接是一個什麼,我沒太了解。 就是直接就是傳資料,就是就像這些,這些是透過就像看你這些就是文件,其實也都是那個,都是那個就是這些sequel的一些statement嘛,那就是說有沒有可能就是說直接讓數據庫資料,就是就像您說的就是數據庫和數據庫直接傳輸這樣子。 對對對。 這個做不到。 就是他有什麼利弊這樣子。 這個做不到的一個原因是什麼呢?就是數據庫,我們知道只要用到數據庫的這一塊傳輸的話,數據庫的機制就不一樣。 比如說那個Mycircle的話就是 就是無論是Oracle啊,或者說Mycircle啊,或者他那種傳輸,或者還有infomix這種數據庫呢,它是靠日誌的。 就是說它有一個後面的執行日誌,然後要同步日誌的,然後這個同步日誌呢要靠服務器,兩個服務器之間是OK的,就是比如說現在說咱們咱們肯定都你們應該都非常了解,就是比如說數據庫的主從同步,都是靠您說的這個叫資料庫的,就是它靠那個log這種模式去同步的,然後有這個文件了,然後像我們這種數據庫呢,就是門店的這種數據庫呢,你不知道門店的這個網絡是一個什麼樣的,而且他和它之間呢,他和它之間的這個數據庫的訪問呢就它不是一個獨立IP,雖然它不是一個兩個不是一個獨立IP,在公網上都能可信的去訪問它。第二個的話,要做這件事情要獨立的,要 出來一個服務去做它。 那個是很複雜的。 就是現在 在这套技术限制了您刚才说的那个问题。 那还有一种最古老,最不是古老的,还有一种呢东西是什么呢?就直接换那个database。 我看到就国内有一些 供应商服务供应商,就是给别人弄的是直接换。 比较好嘛,直接换,就是这个HQ server上这个门店的这个database呢,是一个文件。 然后server这个是一个文件,那 你既然每天发生这种变化,我担心担心你, 担心你变来变去会不一样,但是HQ server这个就是这个数据一定是百分百正确的。 因为如果这个不正确的,那就麻烦了,是吧,我们这个是有个假设的,这个数据库肯定是数据是 最正确的。 然后我们直接就把它拷贝过来就完了,就是把文件直接弄下来,直接就下载,然后也就不存在了什么就是全量,增量,实时这些问题,这个也是一种,但是这个方案我们也是 不建议有的,因为那个文件太大了,像咱们 我不知道大华的单体门店的商品品类一般 像3000平米,1000平米到3000平米这样的大店的话,基本上是8000个商品,或者说几万个这个商品。 就是那个 不是SKU,是那个商品, 就是种类。 像国内的话就是8000多种,然后 一般中的的话8000种,大的话3万多种,这个商品种类,然后加上那个SKU的话,那个数量太多了。 那没法玩,就加上它的规格很多东西,那 那 干不了的,就是本身它的商品主数据的一个数量的话,就是20多万,就是基本上大的话就是30多万, 这样的一个数据量,门店的商品数据量,所以说那个文件下载下来的话也比较大,有可能也是百兆的,就数据库,我们不建议。 所以说我们在这里的话,我们整体的一个方案就是我们post安装的时候会下一个 产量。 完了之后呢, 你就下增量就完了,改动了。然后我们在这个机制上呢,就是说,HQ server生成的这个服务,就是我们在这。 就是http生成这个服务,生成这个数据的时候,我们在这一块保证它是OK的就行。 就是我们定期生成的时候呢,我们保证这个数据它是正确的, 可执行的, OK的文件。 我们在这一层把关就行了。 然后呢,还有一个, 其实我们这里面还缺少一个东西,就是如果说从整体方案来说呢,我我是没写的,其实我们这边的话有一个日结,就是其实门店做日结的时候呢,日结的属性, 这一块的话可能咱们要准备一下,后面 这也是一个土逼的事项吧, 土豆的事项。 就是说日结,日结,就咱们大华的日结会做哪些事情,日结完了之后,其实我了解到 我认知里面的，比如说第二天开店的数据，其实是前一天日结后生效的数据。日结了就是，相当于日结了之后呢，我我日结了，就是相当于第二天你就可以销售了嘛，那所以日结前的这个数据是有效的。日结后的数据你变了就变了呗，我就不作为第二天的销售数据。那这个的话是可能要结合咱们大华的一些业务啊，咱们大华到底是这么做，比如说大华里面，我现在了解到这个三级的整体的一个最难的一个地方就是 其实班开店会改，改一些价格，比如说我们的面包啊，很多的东西会临时的去改一些价格，改价，还有一些促销，我们在门店上去做。那未来我们阿里的post呢，其实促销都在SQ server上，在这一层去改动的。 然后都不会在这，然后从那去要下发的，所以说我们现在的整个的这个平台的机制，包括这个产品的机制吧，它就 注定了 或者说是要使用这种方案。 是一個最優的, 然後其他的就的,如果在這上改了,只能提供電務的,你不能改價, 你改,你改眼只能改那個單品的價格,你改了那個促銷的價格呢,那個促銷 還是另外的一個東西,所以說這個使用了這個post的之後呢,可能對我們的 就是 對店裡面的電務人員的感官不是,就是他的操作習慣沒有任何影響,除了平台這個系統的層面的一些影響,但是這個網絡的這個這個引起這個層面呢, 如果我們部門告訴他,他確實能感知到,比如說我改的是他呀,我連的是他,還是連的是他,我們部門是只能知道這件事情,但是他們是不知道的,他們使用還是那台機器,他們還是繼續改,因為現在的話,完全是換成了就是BS嘛,外部瀏覽器這種的東西。
 看一下咱們這邊, 我覺得 還有哪些就是要要確認的。 在這幾個土豆吧。 Hello,咱們這邊還有嗎? 我想請問一下,所以現在那個 source server三層的那個 source server它的 database應該是跟POS一樣的,就是。 是的,是的。 OK,所以也是說到這一個就是server的還有就是資料庫不一樣,所以我們也沒辦法就是直接對接這樣子。 對。 這個light,咱們要是就是檢查的時候,部門完全是可以考出來的,考出來完了用light文件,就是工具可以打開,直接可以看,就是跟數據庫是一模一樣的。 裡面的文件都能看。 那沒有的話我就再說,我我就有問題了。 您講。 其實我我有一些問題哈。 您講。 這是我的看法,不代表大家哈,就是你這個兩層跟三層哦,那個優點跟缺點,其實寫的蠻簡單的哈。 那其實你要說服我們使用你建議的那個兩層架構,其實需要更多的支持的那個論點。 可以幫助我們參考啦,但是站在那個我們大華的部門的人員佈置上面,因為我們一般像IT啦,我相信很多部門也都是這樣子,就是我們其實就是用很少的人,然後做很多的事情。 了解。 所以你提到這個兩層的話,就是可以 降低那個技術部門,我相信是ITS的運維成本,這個其實是蠻好的,因為大華未來的話是一直在展電。 然後我們的人員可能也沒辦法補充的那麼及時。 那其實兩層架構是蠻好的,但是我相信你這邊的那個優缺點的話,可以再加以詳述。 然後譬如說兩層的話, 就是你,你的優點,像這個realtime的那個data的transfer。 那如果是在那個offline的時候,那在這個兩層架構之下,會有什麼影響,然後我們呢,在我們IT或者IS或者業務部門,我們要作些什麼事情,因為我們最怕的就是網路的連接斷掉了,系統出了問題。 那個 link broken。 嗯。 那當然你剛剛也提到了,就是在店裡的每每門店裡面的有一台機器, 因為網路出問題了,那你可以有一個broadband卡。 這是一個, 這是一個很好的方法,就是說你有一個另外一個 connection,你還是可以通到我們的 HQ server。 但是, OK, 再回到一點就是你要加強的是 就是HQ server,你要怎麼樣, 讓他萬一這個HQ server有問題的時候我們該怎麼辦。 然後還有就是這個就是說,如果你這個有任何的問題的時候, 你們可以給我們一些 backup plan嗎? 或者是說在這種情形下, 我們應該如何處理,或者是誰呢,哪一方應該做什麼事情。 這可能比較。 sorry,剛剛剛才剛才我網路稍微斷了一分鐘,就是斷了就是是幾秒鐘吧,就您說的那個 前面几句话我们没听见, 没听到, 您您您方便从重复说一下前面几句话吗? 我前面几句话, 我是不是讲到那个, 如果是说譬如网络, 如果出问题, 你讲的那个的卡。 嗯。 就是说, 如果遇到一个系统或者是一个网络的 connection 有问题的时候, 或者哪一个节点断掉的时候, 那就是你们可以提供补充一下这个我们的 backup plan 是什么?那这个 backup plan 的话, 当然包括就说遇到这种情形应该是如何处理的。 How and who, 谁要去处理这个事情, 是大华还是阿里, 还是IT还是业务方。 那当然刚刚会议上我们也大华这边也就是会总结一些场景, 遇到一些场景, 遇到这些情形, 提供给阿里参考, 然后根据这个的话, maybe 你可以把它补充多一点。 然后 哦，在你的方案里面。 嗯，就是说遇到emergency的时候，那你那个，举个例子，就是你刚刚已经提到了，就是broadband card。 嗯。 嗯，在某一个机器上，如果我们店里的网络断掉，你在店里的某一台机器上，你弄一个broadband card，可以透过那个broadband card有另外一个网络接通，然后到我们的HQ server，对不对？ 嗯，对。 那，那这样子的话，就不会影响到那个店里的业务嘛，运行，可能 嗯。 会慢一点，但是，基本上，至少有一个backup plan。那像这种的话，我，我是比较想知道就是说，每一个店里的机器啦，譬如说那个秤啊，或者是backend啊，或平板电脑啦，或者是哪一个节点断掉的时候，出问题的时候，当然你有一些， 嗯。 嗯。 嗯。 预警啊，警告啊，那， 可是除了这个之外，你的backup plan是什么？我， 就是 是可以提供給我們參考一下,可以幫助我們下決定,譬如說沖向你說建議的那個二級方案。 明白。 對,還有,對,還有一個,我看到是你現在那個這個 deployment的 overall的那個 structure是 based on那個新的,完全就是新系統,對不對? 對。 對,可是問題是我們的POS,就我知道就是我們不可能一夜,一夜就轉換到新系統。 所以勢必是有跟B的一些SAP,或者是我們現有系統,就是我們現有的POS跟新新POS是 mix在一起的的一定會有一段過渡時期。 那這個過渡時期的時候,這個舊 data 跟這個新 data或者這個 flow是怎麼跑的? 嗯。 可不可以你在文件 上面方案上面把這個兩個部分把它再加強一下,因為說實在的,我們也在試著吸收這個新的系統的這個 flow diagram,那我們舊系統我們當然很了解,但是問題就像我剛剛提到的,我們的POS並不是一夜直接就會上去的,所以我們也不是一夜之間,第二天我們就會看到這個新的 flow, 對不對?所以如果可以的話,你把那個我們現有的POS跟新的POS這個 flow,把它 combine起來,讓我們了解一下,因為我們勢必會有一段時間, 就是處於這種狀況之下。 了解你說的。 對,然後還有還有一個就是說,因為這個裡面其實有像那個Vivian啊, Peter啊,他們都有提到這個data的 flow這些問題,那當然其實有很多東西就像你講的,這個有很多的那個 background process。 那這個 background process的時候,如果遇到問題的話,我們是希望說,如果有一個UI可以讓我們相關的人員可以進去控管。那這個UI的話,我不知道是在back office或在其他的系統裡面,當然我們權限上可以控制,譬如說,他可以做哪個部分,然後Peter可以做哪個部分,那這樣可能會好一點,我不知道阿里有沒有提供這一個,就是一個 background process的 control center。 會哦。 會有的,蘇。 OK,好,那那個話,這個話,如果到了那個部分的時候,可能把它 list出來,然後讓我們知道怎麼使用它,有一些培訓這樣。 嗯,我明白您說的,您繼續。 我目前是想到這樣子。 OK,謝謝蘇。但是就是有一個是 事情就是有就是咱们说的这些东西会牵扯的， 它会牵扯好几个阶段的内容。 就您说的这些东西的话， 我这边的话会提前就刚才一个土豆的事项吧，就是我我来处理一个就是数据的同步的事情。 我记一下吧。 然后我刚好把这个弄出来。 对，有些有些东西的话就是我们看了，然后我们想到有一些想法，然后我们提出来。 嗯，如果说是帮助那个我们选择是 你希望比较比较快决定就是两层架构或三层架构，那有关着这个可能要赶快出来，但是其他我有一些提到的部分，不一定要那么快出来，但是问题就是说我们目前我知道我们跟阿里的会议非常的多，然后也提到了很多的诉求，但是问题就是有时候提到过些时候就被遗漏了，被忘掉忘记了。所以 就是不会说等到最后，最后要 go live 的时候，你才想到这一个嘛，所以我只是想，如果我们可以提出来，然后大家心里有个底数，知道双方大概要做些什么事情，可能对，对整个 project 会好一点。 原用。 嗯。 嗨，我就是，你刚想讲想写的第一点，数据同步，我只是在想，是不是，比方说 message queue 的 service，我不晓得是不是可以解决这个问题。 OK。 来只是参考，对， message queue service。 OK，那解决掉那个档案传输的问题。 OK，那第二个就是，在你那个。 这个吗？ 对对对， message queue，OK。 然后那个，第二个就是， 在你的， 那个应该是 solution 上。 上面, architecture solution上面, OSS跟CDN 我們可以把它,我想應該是可以的,就是把它切割開來,把它放在Amazon上面。 你放在哪裡? Amazon, Amazon, AWS上面。 AWS是吧? 對對對對。 OSS是阿里的一個東西。 我知道,OSS那可能是用AWS的S3吧。 對對對。 然後OSS是阿里的一個產品,然後的話阿里雲的一個產品,然後CDN的話就可能可以使用AWS的。 對,那我意思說OSS有可能用AWS的S3嗎? 嗯,明白。 嗯。 這個是一種吧,就是可行性吧,我們就可能分開這樣東西。 問一下,然後server當然我知道要整個轉移,並不是說只有POS可以,可以從 單獨的切割開來,從阿里放到AWS,那個可能是一個很大的工程,那可能牽涉到了整個 project。 是的。 對。 但是如果關關於這個 storage啊,還有這個CDN的部分,是不是可以把它分切割開來,這我就不曉得了,只是這樣看一看。 了解,謝謝。 OK,可以的,這個這個我會下去了解的。 嗯。 好,謝謝啊。 哎,蘇總,我我把這個命名為IT部門的故障控制台,你剛才說的那個 banker process control center,是不是這個意思? 或者是那個後台運行的 background, background task, schedule task的 control center。 就是中台吧,電務 怎麼說呢? 控制。 你那個後台的腳本,不是有很多腳本在運行嗎? 嗯嗯。 你那些腳本。 嗯,我們現在這個的話倒不是很多腳本,它都是服務,然後這個服務呢都是程序。 也 不是一些腳本。 然後我們肯定是會提供一個那個就是跟現在BC一樣,或者說那個啥呀,就是一個外瀏覽器,然後登錄進去是有一個UI,然後您可以去點去控制它。 OK,好。 然後這個就是一個控制台,然後這個是部門要有一定的控制性嘛,就是之前埃及的時候你也提過就是說在一些傳輸上 如果出现问题了,你你像我今天还听了您之前就是讲那个DR的时候,就DR比如说DR的那个DR出现问题,你比如说美国的有一些日日子,然后传输的时候有可能是Monday,他放假了,然后可能提到周五,上周本周五,下周一他不上班,周五之前传,然后还有一个呢,可能下周一下周二再传,就类似这种的控制。 是不是? 然后还有一些的话就是 出现问题了,然后发email,然后成功了也有一个confirm,就是说告知你这件事情已经是OK了,其实就是一个那个 邮件的这种可可达的这种一个机制,就信息通讯机制,这个是这个是这样的,我理解的是这样的一个机制。 对,但是,但是你知道鸡蛋不能放在一个篮子上面吗?所以我们有时候像我们最近遇到我们的主网络断掉了。 嗯。 那你知道这个如果放到这个阿里这个HQ上面的话, 那你知道问题出在哪里,影响层面就是非常大。 所以像这种情形的话,我们该怎么办呢? 您刚才说那个主网络断掉,就是您可以举一个例子吗?我我说的组网络断掉了,但是像拉克还有的话,现在现在的他都支持这个销售的,就是他的销售场景就是店里面的销售是不会断掉的呀,因为他本身它是一个离线的状态嘛。 他的机都是可以正常销售的。 对,那个这个可以可以说明一下哈。 但是 对对对,那个苏的意思是说我们的主网络是ISP,它的physical的线呢,某种因素,因为他他他可能被扯断了啦,或者是因为 淹水或者各种原因,他可能他的整个这个ISP的physical的 的connection断掉了三四天,类似这样子。 这个的话在国内有一套的整体的方案,就是你刚才说的这个主网络挖断,就比我我我我说一下国内的吧,看跟你这个场景是不是一样的。 国内的话,比如说那个建筑的时候啊,有一些我施工啊,然后把主主主光纤给挖断了。 然后导致整个的机房就访问不了了。 就是就是刚才看这个图吧,就是这个访问都访问不了了,所以国内的一些这个东西的话,会建一个双活,就是我上次提到的一个双活,双活的这个术语,双活的术语是说什么呢? 这边是一个中心,还有一个异地的中心,就是异地中心,然后异地中心完了之后呢,还有双双网。 双主网,双主网的一个东西概念是什么呢?像国内,我不知道美国 的網絡運營商是一個什麼樣的,如果美國的網絡運營商有兩家,比如說A和B,然後的話跟每一個中心都會加一個A加一個B,加一個A加一個B,然後這些這些都是方案,的是解決的方案,但最終的話是要考慮考量成本的,就是您說的那個事件的話,只要不影響整體的用行,那是OK的,還有一塊的話就是看異地的備災要不要支持,這每一個的話就是剛才提提到的那個事情,就是我,我給您給大家說的,就是結合這個網絡,就是我們接受這個,就是可用性,就是容忍容忍度吧,就是這個服務的容忍度,我們接受它是四個九還是九個九,就您剛才說的那個就是主觀遷,是不是主觀遷被挖斷了,然後挖斷了主網就不通,那個維修肯定很長,就是施工啊,然後出現問題,這種問題怎麼辦? 那 也是另外的一種東西,就是那個可能跟另外的一個 那就是另外的一件事件。 我是分享一下這個。 永,請問一下,阿里現在阿里cloud OK,他允不允許兩個data center的 同步,我我應該 我想應該是可以了。 可以的,可以的。 但是你,你講。 嗯 只是成本很高而已。 呃,也不能這樣去理解它,我我覺得有這裡有兩塊啊,您說的那個成本有兩塊,我我跟您要這樣解讀這個東西。 就是 我了解到信息我跟您分享一下,就是比如說阿里Cloud呢,其實阿里Cloud是一個永服,跟AWS也是一樣的,但是這個服務器呢,他有他有他的數據中心。 他AWS也有他數據,比如說他在在美美國 国的南南部或者说在北部, 然后呢它有两个大数据中心,然后是不是在这两个数据中心去建两套的这个服务,这是一种机制,还有一个的话是一个独立的,就是说我就是在南南部就是 见了这个数据中心,建了数据中心我就有买他的服务器嘛,就举个例子就是买他的服务器。 买了它的服务器之后呢, 我是不是要在他本身买两套服务器,在他一个地方买两套服务器这个的,这个做一个高可用,就是说一部分坏了,启用另外一部分,就跟咱们门店的这个双双主从网络一样,还是说在AWS南部这个数据中心去买一套,然后在北部也去买一套,然后呢这两个去做这个高可,这两个方案都不是不一样的。 这两个是不一样的,然后呢在这个上面呢就是很多的客户呢都会选用不一样,在这个上面还有另外一个更更复杂的就是我不光在南部还买了 还在北部也买了，但是在那个南部和北部里面都买了，两套，都买两套，就是说为了这个东西，这个是取决于一个成本的考量，就是说要做到怎么样的，就是为了几个酒，他去做这件事情。 但我们一般的话不太建议，就是门店的销售啊，就是门店的销售，就是这个已经支持了。 然后而且的话从店务的用心，就是从业务的用心。 就是如果数据第二天早上出问题了，那晚上 都会发预警的，就是门店不能销售的事情是不允许发生的，而且这样的事件呢都是 按照国内的级别的话都是属于P0事件，或者说P1事件，这样的事件发生了是很可怕的，而且是整个区域不能销售了。 那是相关的负责人肯定是要受到，就是 有有一定的责任了，所以说这个事情呢在通过系统机制去屏蔽，比如说就是我的 发生HQ发送这个server的这个数据出了问题, 提前预警, 提前预防, 提前处理。 然后第二天的这个销售呢一定是OK的, 然后国内现在 最后的一条的 机制是什么?如果真的出现了所有的问题都无法去衡量的话, 考量的话,就第二天的标签就停止, 停止打印,以昨天的销售 的主数据的销售去打,就价钱都不贴了,就所有的活动取消。 然后要保证这个价格是统一的,就是你按照昨天的那个数据去销售就行了,但是都不影响销售,因为POS机可以开机,POS机可以销售所有的,这个是不影响销售,只是影响比如说促销啊,改价啊这些东西,也不影响 进货,就比如说铺货这些东西,因为PDA是PTT啊这些东西都有带离线的嘛,你是带离线机制,你可以补货,你可以补到你的架。 销售的业务是完全是OK的。 它是不影響的。 所以說一般門店除了大的非常大的這個HQ server會做非常的幾個九個這種,一般都不做。 對對,理解,謝謝,因為因為我相信蘇善跟我還考慮的應該是HQ的server的部分啊,那店裡面的假設線路斷了,就是斷了嘛,那等到網絡恢復了,他就資料上傳。那比較擔心的就是以後我們整個整個整個ERP的system全部都是在cloud上面的時候,那這個就會影響很大。 嗯 我我我從整個的這個功能線上來說,或者說從產品或者從項目線上來說,或者說從從一個客戶的角度來說呢,就是說我們有,我們就拿現在來說吧,就是現在SAP是一套,lag是一套,R是一套,這個獨立部署啊,一定要這樣去做的。 我分享一下国内是怎么部署这一套的啊，我再说一些这些经验，看一下咱们有有没有借鉴的，或者说是怎么样的。像国内的话，它的店是比较多的，它会把这个HQ server呢会不多个，这个多个是怎么分的？就是鸡蛋不放在一个篮子里面，比如说我们有十个店，十个大中小，大店会放到一个HQ server里面，这个HQ server会负责五六个店，那个HQ server会负责五六个店，那个当然我说的五六个店是比较比较比较少的了，就是五六个大店，然后呢一般的话负责50多个，60多个这个中型或者说中小型的会集中了，或者有的小型的会100多家门店放在一个，这样的话HQ server会多不几个，但是HQ server呢这个鸡蛋呢会不同的，那你一个HQ server挂掉会只影响你那几个店，所以说HQ server真的出问题了，它不会影响所有的店，国内的有这么一套部署的这个方案，那这届的话跟技术关系不大，但是都是一些部署的方案，就是结合 能不能降低业务的一些风险。 是这样来部的。 还有的话就是ERP会跟pose都分开部,这些东西不部署在同一套环境下,就ECS也好,包括我们现在比如说BC2O啊, 都不部署在同一套环境下,你可以数据可以使用同一个,当然我们以前的这种的话,就是这样的话就是你数据可以共享,但是服务是分开的,不然的话就是假如说这个数据中心就无论现在用的阿里数据中心还是AWS的数据中心,就是它的服务器如果在同一个地点, 假如说他出了问题了,比如说 说的可怕一点吧,就是发生地震了,然后网络出问题了,那整个数据中心网络出问题呢,所有使用它的那些ECS全部挂了。 在那一个期间在处理 AWS也好,阿里也好,他用为整个把服务器维护维护好之前的那一段时间肯定是全挂了的,所以说这些要不要去考虑 这样的事故。 这都是要咱们业务定的,可能要咱们大华来定这件事情,我只能分享一些这些方案,就是咱们定出来,然后针对性的,然后结合一下业务,然后匹配一下方案。 看一下这些最优的。 理解理解。 因为我们为什么会这样问,因为阿里Cloud的service,在美国相对来说是比较 compare AWS当然是 比较小,对对对,因为因为阿里的 云端呢,data center,就是在东西岸各各一个嘛,那他可能有分两个zone。 OK,那AWS的话,可能在放在美国大概就有十几个data center。 对。 OK,那所以所以会有这种考量啊。 然后 Scott,我们现在,我记得那个我们的ECS是放在两个中不是吗? 对对对,是在两个中,OK, 东岸吗? 没有没有没有没有没有没有。它是在一个data center,但是分了两个zone,那这个两个zone呢,他们的通常呢会距离大概几十个公里以上吧。 OK,他只是预防说 有地震啊,或是有有一些突发状况。 对对对,某一个,某一个,某一个zone可能毁掉了,他但是他有另外一个zone,他那通常他们failover是在同一个data center里面。 OK,那至于东西岸的,那又是另外一回事了。 OK。 那苏总,您说的这个post的控制台的话,就可能要涉及到产品,就是项目产品了,就真实的要去落地的这个东西了,会比较多了,就是咱们这边,就您刚才说的就Peter,就就您刚才说的是谁,就是要提供一下咱们这边就是一些想法吧,因为我也做了一些记录,像的时候我就做了一些记录,但整体的话 就是要控制哪些点,然后你们的想法也提一下,我这边的也会自己把这个方案先设计出来,然后您说的那个的那个层面呢,就是属于操作层面,我可能不会不会关注到,我不会沉着这么细,但是我整体的那个方案会设计这个流程点,比如说出现这个事件,比如说我给你举一个简单的例子,比如说发生了这么一件事情,就是网络坏了,网络故障,然后接下来第二步,就是流程嘛,第二步,比如说要求这个,比如说部门,然后做什么样的事情,这个就类似一个P样这样的一个节点,然后这个P里面会穿插一个就是您说的,跟系统之间的一些关系,比如说这个时候呢,T呢,会在这个时候呢会收到一个email,他自己会会去看这个东西,然后看到email之后呢,他接下来会怎么处理。那这样的话会跟系统会做一个穿插,但是在系统上要做怎么操作这个事 事情我可能就设计不会设计这么细了,因为这是一个产品设计的一个层面。 可能我这些流程的话也要跟产品要去沟通,是这样一个层面,但是整体的那个您说的那些点我都是完全理解到的,我们的产品,我们的PT也参与这个会的,到时候我们在内部沟通一下。 对,其实基本上的话就是说你遇到故障的时候,那我们不能完全 rely on说等他恢复嘛,那也不能坐以待毙嘛。 所以我们一定要有所行动啊,那你你的备案是什么呢?譬如说你你要给我一个 manual的 process,然后我们可以手动做一做,然后怎么传怎么传,从HQ,然后用手动或者用email或什么把这个档案传输过来,到店里,然后店里再漏进去,我只是举个例子哦,但是基本上你不能说让我们IP什么事都不能做,只能等着他回复这样。 好的,我相信结合咱们这边的一些现在这么多年的一些经验 經驗,就是你積累下來的一些東西,就是咱們大華的,再結合我自身的一些,我覺得我還是比較了解的這一塊的,所以我相信最終出來的這些東西的話, 一定會,應該會能解決我們大華現在所有的問題,不能說00%吧,幾個九還是可以的。 我還是有信心的,這是我個人的一個感受,目前的一個感受,所以在這一塊的話,就是最終的話我看時間也22了,像八分鐘,然後其實這一塊的話就是然後,其實我們現在包括,然後我們整體的話現在有三個方案,一個是二級,一個是三級,雖然這個三級方案看著,就是我我剛才列這個內容的時候呢,跟我們 大華現有的也好,也好的三級方案不一樣,但是它也屬於一種三級方案。 加上之前的二級方案,現在有 三套的这个方案,咱们大华的话就是内部沟通一下,然后到时候给一个就是整体的吧,就是评估完了,然后包括苏珊说写的最细的这个东西,我想会后面去写,但这个,我觉得这个可能就不影响这个方案的评估了。 就是方案到底选用哪个,因为这个细节不影响整体的这个评估。 因为不管有哪个,选哪个方案,这个您说的这个东西,您说的最后的这个东西,肯定是要列出来的。 这些东西,就是 不管是这个优有优势,然后这个东西一定是会有的,所以说不影响它,所以这是一个事情。二一个的话是,我这边的话上一次 就是这个也是影响,就是Peter,然后帮忙跟苏珊看一下这个帮加上去,就是之前嘛,聊的这个,就是咱们门店现在用了呀,严控到底是这么做的,然后现在的一些脚本啊,然后可能 咱们太忙了,没加上去。 說的就是刪掉了這個要加到這嘛,聽到還記得吧? OK,這個我今天把它補上去吧。 謝謝謝謝,就是這個補一下,然後也也是有助於我理解了解咱們現在做了哪些東西,然後我我會在這些,就是至少在這個上面, 會有一個完整的體現的,因為我我們的系統用上去之後呢,這些腳本是用不了的,就是不會再有腳本的出現了,當然可能會有腳本,但那腳本就比較少了,然後呢咱們這邊的IT部門呢都是通過登錄頁面, 控制 點點按鈕。 啊 都是這樣的。 這個會 對對,再補充一個,你這個土度裡面可以再加一個就是那個 Network flow是包括我們目前的POS加上新的POS,因為我們有一個POS銜接的問題嘛,那那整個架構可不可以一起呈現出來? 嗯 这个可能呈现不了,因为我给您看另外的一个东西吧,其实是我们内部的,但是我我还是分享一下吧。 呃,看一下啊。 稍等一下。 再多占用你们几点时间吧。 嗯,我可能要登个内网,稍等我一下。 嗯。 稍等一下,马上好。 我也是。 稍等我一下。 然後我再打開我寫,我正在寫的一些東西,然後。 嗯? 嗯,這個。 我把一些事情,我還是覺得說透吧,我我個人是喜歡說透一些事情,就這個的話是我正在整理的,這個界面能看到嗎? Hello。 可以。 可以。 可以看到是吧?這是我正在整理的像SAP啊,然後這些東西,然後這是一個現有的的對接,就是包括這些字段我都在整理,然後包括這些文件,然後這之前的,其實這個的話我後面會轉到外網的,就是大華的這個語缺上去,這是我們自己,我自己的文件,然後呢,這些東西的話需要一些補充,有些是之前提供的資料是圖,然後這是一個現有的,然後我結合這個現有的呢,我會還會出一個就是跟我們系統相關,就是跟我們現在產品相關的一個方案,就是說怎麼去對接,那是另外的一個方案,就是我給您看一下這個,這個 这个东西。 就是说除了部署方案,部署方案就是刚才提到的这个, 提到的这个东西。 就是咱们一直在聊嘛,三级部署,包括部署方案的确定要素,基于爱的要素确定计划,就是今天聊的就是 咱们,但凡已经有三个方案了,咱们具体要聊一下,然后门店的这一块的东西,这个是对接的,然后这些对接完了,我们会出一个第三方系统对接方案是基于我们自己产品的,然后我们会出一个对接方案,这样的话就是一个有一个对比,我刚才整理的这个呢是现有的, 然后我结合这个现有的呢,我会出一个这个东西,然后电子秤的数据方案呢,我会看那个PDF也会出一个这么一个方案。那结合这些的话,您说的那个另外一块,就是并行使用的那个方案呢,是上线方案,那可能会,刚才这个方案呢可能会晚一点。 这个会比较晚,然后您说的那个上线的方案,我现在可能给你,给你,可以给你穿插一下啊,穿插说一下,就是post的这个并行的 不会时间不会特别长。 然后很简单,就是我可以切,比如说本周我切着一个 都是建议客户切两排,切两排只是使用,内部员工会使用,就是我个人所有的,就是内部员工使用,内部员工使用完了之后没有OK了,OK了之后切一半,切一半的时候呢,让顾客使用。 然后顾客使用一个月,或者说两周,然后所有的场景基本都没问题了,因为 这两周的话要做两件事情,一个的话是业务场景的OK,销售的业务场景,还有一个还有一个问题的话就是对账,就是我们的账会,就是之前不是聊到说跟SAP要对嘛,P是放到后面嘛,去去切嘛,就是SAP放到后面去切,那所以跟SAP的账是不是平的,然后这一块有一个有一个周期,只要对完了这两件事情,对完平了之后呢,然后我们会直接就会把剩余的台数全部切掉,就换成换成阿里的。 然后这个门店再运行一周， 再运行一周，然后会留一台备用的老机器，就是老的RTR的POS会备用一个放在那里。万一出现问题，只是为了核查对，只是为了对账，就和，就是说这个价格对不对啊，还是为了保险期间，然后最后的话会全部换掉，然后全部换掉完了之后呢，后面的所有的店的切换不会再保留这样一个上线的机制了。就是说再切的时候呢，就是全店切了，不会再说再上两台，再上两台，不会这样的。除非，除非有两种场景出现，业态， 我说的业态是门店的这个 业态的模式，比如说那个餐饮的， 餐饮的跟普通收银的会分开演示这种上的机制，只是同步的，不会说POS的机制，因为它是两种POS，所以说是两种，而且店也可能不太一样。所以说还有POS，那自助收银也是一样的，自助收银因为是一个新的，所以说现在也是一个全的，所以说 这个上线方案是比较会比较晚出来,因为这个上线方案会结合一些现在的产品的一些东西,所有的东西的一些东西出来,所以说是比较比较比较花一点时间的,可能这个出来的话,11月是出不来的,可能到1月啊,会才出来这个东西。 但那时候出来也是一个比较粗的,我是要如实的告知一下这个事情。 因为你看到了,我跟你看一下再看一下,就是上线方案完了,还有用维方案,用维方案就是整个上线的这一块的,这个方案会包括我们的,包括咱们RT部门的所有的东西都会放在里面,就是双方的都会在里面一个用维方案,还有一个叫割接方案,割接方案就是割接方案是实施上线方案的一个方案,整体落地的,就是实操的方案,上线方案只是一个是一个步骤清晰的一个规划的一个整体方案,然后割间的才是一个实施的方案。 這個。 嗯。 您講。 對,那謝謝元勇哦,你已經都把它考慮進去了,但是我講的那個並不是很很細緻的這些上線方案啦,我只是說一個大略的一個一個flow,一個圖這樣子。 那如果說我們你已經說的,可以。 對,如果清楚的話,那就沒什麼問題,只是因為我們試著現在在了解新的這個flow,然後如果再想到目前的flow的話,那我不知道說這兩個混雜在一起會不會有什麼狀況,當然這個也可以之後,之後再來說這樣。 那這樣,就是可以列出來這個,就是說大概列一個概要,這樣的行嗎? 就是說不會特別細,就同時用行的一個狀況, 或者說是一個流程, 以及數據,大致的一個流向,嗯。 然後最主要是說它是二級或三級的話會變成什麼樣子。 明白,那就愛三期沒有任何影響。 這個沒有任何的影響的這一塊。 但是這個的話就會晚一點,會晚一點,就是我到時候這樣吧,就是你這個需求我覺得也是正確的。 非常OK的,然後就是先提供出來,就是不是特別細,然後有一個大圖,就是相當於一個概要樣這樣的一個東西,然後咱們可以 先了解嘛,然後及時的發現問題也可以去修正一下。 我就OK的。 OK。 我看耽誤了三分鐘。 那如果沒有的話就今天結束了,就是幫忙把這個文件補充一下,幫忙把這個文件補充一下,然後還有咱們大華這邊要提供的提供的一點就是一些故障預防機制吧,預防的場景,就現有的 好吧,咱們現有的 提供一下。 預防出。 好,沒問題,沒問題。 好的,好的。 謝謝。 那今天就這樣,正南看你這邊還有嗎?Michael,你們有嗎?Peter,Susan,你們還有嗎? 我這邊沒有了。 沒有是吧? 我這邊沒有了,大家都了,謝謝。 好的,好,謝謝。